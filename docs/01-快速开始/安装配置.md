# 安装配置指南

**更新时间:** 2025-11-02
**适用版本:** v1.2.0.14+

---

## 📦 系统要求

### Windows系统

| 项目 | 要求 |
|------|------|
| **操作系统** | Windows 10 / Windows 11 (64位) |
| **处理器** | Intel i5 或更高 |
| **内存** | 8GB RAM 或更高 |
| **硬盘空间** | 2GB 可用空间 |
| **网络** | 需要互联网连接（用于云端数据同步） |
| **其他** | Excel 2016+ (查看报告) |

### macOS系统

| 项目 | 要求 |
|------|------|
| **操作系统** | macOS 11 (Big Sur) 或更高 |
| **处理器** | Intel 或 Apple Silicon (M1/M2) |
| **内存** | 8GB RAM 或更高 |
| **硬盘空间** | 2GB 可用空间 |
| **网络** | 需要互联网连接 |
| **其他** | Excel for Mac 或 Numbers (查看报告) |

---

## 🔽 下载安装

### Windows 安装

**方式1: 一键安装包（推荐）**

1. 下载安装包
   - 访问 https://api.genepop.com/downloads
   - 下载 `genetic_improve_v1.2.0.14_windows_installer.exe`

2. 运行安装程序
   - 双击下载的 `.exe` 文件
   - 按照向导提示完成安装
   - 默认安装路径: `C:\Program Files\GeneticImprove\`

3. 首次启动
   - 桌面双击快捷方式
   - 或从开始菜单启动

**方式2: 便携版（无需安装）**

1. 下载压缩包
   - 下载 `genetic_improve_v1.2.0.14_windows_portable.zip`

2. 解压缩
   - 解压到任意文件夹（如 `D:\GeneticImprove\`）

3. 运行程序
   - 进入解压后的文件夹
   - 双击 `genetic_improve.exe`

---

### macOS 安装

**方式1: DMG安装包（推荐）**

1. 下载安装包
   - 访问 https://api.genepop.com/downloads
   - 下载 `genetic_improve_v1.2.0.14_mac os.dmg`

2. 安装应用
   - 双击 `.dmg` 文件
   - 将 `GeneticImprove.app` 拖拽到 `Applications` 文件夹

3. 首次启动
   - 打开 `Applications` 文件夹
   - 双击 `GeneticImprove.app`
   - 如提示"无法打开"，见下方故障排查

**方式2: 应用包（直接运行）**

1. 下载压缩包
   - 下载 `genetic_improve_v1.2.0.14_macos_app.zip`

2. 解压并运行
   - 解压后得到 `.app` 文件
   - 双击运行

---

## ⚙️ 首次配置

### 1. 注册登录

**新用户注册:**
1. 启动软件，点击**"注册"**
2. 输入以下信息：
   - 用户名（唯一标识）
   - 密码（至少6位）
   - 邀请码（向管理员获取）
3. 点击**"注册"**

**已有账号登录:**
1. 输入用户名和密码
2. 勾选"记住密码"（可选）
3. 点击**"登录"**

**忘记密码:**
- 联系管理员重置

---

### 2. 更新本地数据库

首次使用需要下载公牛遗传数据库：

1. 登录后，点击**"数据管理"** → **"更新本地数据库"**
2. 系统自动从云端下载最新公牛库（约132MB）
3. 下载进度显示（MB + 百分比）
4. 下载完成后自动导入

**更新频率建议:**
- 每月更新1次（获取最新公牛数据）
- 重大版本更新时必须更新

**数据库位置:**
- Windows: `C:\Users\[用户名]\.genetic_improve\local_bull_library.db`
- macOS: `/Users/[用户名]/.genetic_improve/local_bull_library.db`

---

### 3. 配置系统参数（可选）

进入**"设置"**界面，配置以下参数：

#### 选配参数
- **后备牛开配日龄**: 默认420天
- **选配周期**: 默认21天
- **近交系数阈值**: 默认3.125%
- **控制隐性基因**: 默认开启

#### 报告参数
- **牧场名称**: 显示在报告中
- **性状权重**: 自定义母牛指数计算权重

#### 系统参数
- **自动保存**: 默认开启
- **数据备份**: 建议开启
- **更新检查**: 建议开启

---

## 🔧 高级配置

### 配置文件位置

**Windows:**
```
C:\Users\[用户名]\.genetic_improve\
├── config.json          # 系统配置
├── local_bull_library.db  # 公牛数据库
└── projects\            # 项目文件夹
```

**macOS:**
```
/Users/[用户名]/.genetic_improve/
├── config.json
├── local_bull_library.db
└── projects/
```

### config.json 示例

```json
{
  "user": {
    "username": "张三",
    "auto_login": true
  },
  "mating": {
    "heifer_start_age_days": 420,
    "cycle_days": 21,
    "inbreeding_threshold": 3.125,
    "control_recessive_genes": true
  },
  "report": {
    "farm_name": "伊利牧场-北京",
    "index_weights": {
      "NM$": 0.5,
      "TPI": 0.3,
      "DPR": 0.2
    }
  },
  "system": {
    "auto_save": true,
    "auto_backup": true,
    "check_updates": true
  }
}
```

**修改配置:**
- 直接编辑 `config.json`
- 或在软件"设置"界面修改（推荐）

---

## 📂 项目管理

### 项目存储位置

**默认位置:**
- Windows: `C:\Users\[用户名]\Documents\GeneticImprove\`
- macOS: `/Users/[用户名]/Documents/GeneticImprove/`

**修改项目路径:**
1. 进入**"设置"** → **"项目管理"**
2. 点击**"更改项目路径"**
3. 选择新的文件夹

### 项目备份

**自动备份（推荐）:**
- 在"设置"中开启"自动备份"
- 每次操作后自动保存
- 保留最近7天的备份

**手动备份:**
1. 复制整个项目文件夹
2. 保存到其他位置（如U盘、云盘）

**恢复备份:**
1. 复制备份文件夹到项目路径
2. 在软件中**"打开项目"**
3. 选择备份的项目文件夹

---

## 🚨 故障排查

### Windows 问题

**问题1: "缺少DLL文件"**

**解决方法:**
1. 安装 Visual C++ Redistributable
   - 下载：https://aka.ms/vs/17/release/vc_redist.x64.exe
   - 安装后重启电脑

**问题2: "无法连接网络"**

**解决方法:**
1. 检查防火墙设置
2. 允许 `genetic_improve.exe` 访问网络
3. 关闭代理或VPN重试

---

### macOS 问题

**问题1: "无法打开，因为来自身份不明的开发者"**

**解决方法:**
1. 打开**"系统偏好设置"** → **"安全性与隐私"**
2. 点击**"仍要打开"**
3. 或在终端执行:
   ```bash
   sudo xattr -rd com.apple.quarantine /Applications/GeneticImprove.app
   ```

**问题2: "应用已损坏"**

**解决方法:**
1. 在终端执行:
   ```bash
   xattr -cr /Applications/GeneticImprove.app
   ```
2. 重新启动应用

---

### 通用问题

**问题: 无法更新数据库**

**可能原因:**
- 网络连接问题
- 磁盘空间不足
- 防火墙阻止

**解决方法:**
1. 检查网络连接
2. 确保至少有2GB可用空间
3. 关闭防火墙或添加白名单

---

## 🔄 更新升级

### 检查更新

1. 进入**"帮助"** → **"检查更新"**
2. 如有新版本，点击**"立即更新"**
3. 下载完成后自动安装

### 手动更新

1. 访问 https://api.genepop.com/downloads
2. 下载最新版本
3. 卸载旧版本（数据和配置会保留）
4. 安装新版本

**注意事项:**
- 更新前建议备份项目数据
- 更新后首次启动可能需要重新登录
- 数据库和配置文件自动保留

---

## 📞 技术支持

如安装过程中遇到问题，请联系：
- 📧 Email: support@genepop.com
- 📱 微信群: 扫码加入用户交流群
- 🌐 在线文档: https://docs.genepop.com

---

**安装完成！** 🎉

下一步：查看 [快速入门指南](./快速入门指南.md) 开始使用系统。
